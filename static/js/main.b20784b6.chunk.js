(this.webpackJsonprecipe=this.webpackJsonprecipe||[]).push([[0],{37:function(e,t,c){},38:function(e,t,c){},57:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(1),a=c.n(r),s=c(29),o=c.n(s),i=(c(37),c(38),c(10)),l=c(2),u=c(12),j=c.n(u),p=c(15),d=c(8),b=c.n(d),h=(c(57),function(){var e=Object(l.g)(),t=Object(r.useRef)(),c=Object(r.useRef)(),a=Object(r.useRef)(),s=function(){var n=Object(p.a)(j.a.mark((function n(r){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.next=3,b.a.post("https://recipe-strapi-app.herokuapp.com/auth/local/register",{username:t.current.value,email:c.current.value,password:a.current.value}).then((function(t){alert("Tout est bon !"),e.push("/login"),console.log("User profile",t.data.user),console.log("User token",t.data.jwt)})).catch((function(e){console.log("An error occurred:",e.response)}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"signup",children:[Object(n.jsx)("div",{className:"title",children:Object(n.jsx)("h2",{children:"REGISTER"})}),Object(n.jsx)("form",{onSubmit:s,children:Object(n.jsxs)("div",{className:"inputs",children:[Object(n.jsx)("p",{children:"Username"})," ",Object(n.jsx)("input",{type:"text",ref:t}),Object(n.jsx)("p",{children:"Email"})," ",Object(n.jsx)("input",{type:"text",ref:c}),Object(n.jsx)("p",{children:"Password"})," ",Object(n.jsx)("input",{type:"password",ref:a})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{type:"submit",children:"Let's cook"})]})})]})}),O=c(13),m=c(9),x=(c(63),function(e){var t=e.target.parentNode.id,c=localStorage.getItem("jwtToken"),n={headers:{Authorization:"Bearer ".concat(c)}};b.a.delete("https://recipe-strapi-app.herokuapp.com/recipes/".concat(t),n).then((function(e){console.log("La recette a bien \xe9t\xe9 supprim\xe9e"),setTimeout((function(){window.location.reload(!1)}),200)})).catch((function(e){console.log("An error occurred:",e.response)}))}),f=function(e){var t=e.title,c=e.picture,r=e.id;return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"recipeCard",children:[Object(n.jsxs)("div",{className:"head-recipe",children:[Object(n.jsx)("h3",{className:"recipeTitle",children:t}),Object(n.jsx)("button",{onClick:x,id:r,children:Object(n.jsx)("i",{className:"fas fa-times"})})]}),Object(n.jsx)("img",{className:"recipeImage",src:"https://recipe-strapi-app.herokuapp.com/"+c.url,alt:""})]})})},g=(c(64),function(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),c=t[0],a=t[1],s=Object(r.useState)(""),o=Object(m.a)(s,2),i=o[0],l=o[1],u=Object(r.useState)(""),j=Object(m.a)(u,2),p=j[0],d=j[1];function h(){document.getElementById("recipeModal").style.display="none",window.location.reload(!1)}return Object(n.jsxs)("div",{id:"recipeModal",className:"recipeModal",children:[Object(n.jsxs)("div",{className:"modalTitle",children:[Object(n.jsx)("h3",{className:"recipeTitle",children:"NEW RECIPE"}),Object(n.jsx)("button",{onClick:h,children:Object(n.jsx)("i",{className:"fas fa-times"})})]}),Object(n.jsxs)("form",{onSubmit:function(e){var t=localStorage.getItem("jwtToken");e.preventDefault();var n=new FormData,r={title:c,recipeText:p};n.append("files.picture",i,i.name),n.append("data",JSON.stringify(r)),console.log(n);var a={headers:{Authorization:"Bearer ".concat(t)}};console.log(a),b.a.post("https://recipe-strapi-app.herokuapp.com/recipes",n,a).then((function(e){console.log("La recette a bien \xe9t\xe9 cr\xe9\xe9e"),setTimeout((function(){h()}),200)})).catch((function(e){console.log("An error occurred:",e.response)}))},children:[Object(n.jsx)("input",{className:"titleInput",type:"text",placeholder:"Title...",onChange:function(e){return a(e.currentTarget.value)},required:!0}),Object(n.jsx)("textarea",{name:"",id:"",cols:"40",rows:"20",placeholder:"Text...",onChange:function(e){return d(e.currentTarget.value)},required:!0}),Object(n.jsx)("input",{className:"imageInput",type:"file",name:"",id:"",onChange:function(e){return l(e.currentTarget.files[0])}}),Object(n.jsx)("button",{type:"submit",className:"saveModal",children:"SAVE IT !"})]})]})}),v=(c(65),function(){var e=Object(r.useState)(null),t=Object(m.a)(e,2),c=t[0],a=t[1],s=Object(r.useState)(!0),o=Object(m.a)(s,2),i=o[0],l=o[1],u=localStorage.getItem("userToken"),j=u.charAt(0).toUpperCase()+u.slice(1);return Object(r.useEffect)((function(){b.a.get("https://recipe-strapi-app.herokuapp.com/recipes").then((function(e){console.log(e.data),a(e.data),l(!1)}))}),[]),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("button",{onClick:function(){document.getElementById("recipeModal").style.display="block"},children:Object(n.jsx)("i",{className:"fas fa-plus-circle"})}),Object(n.jsxs)("div",{className:"account",children:[Object(n.jsx)("p",{children:j}),Object(n.jsx)("a",{href:"/",onClick:function(){localStorage.clear()},children:"Log-out"})]})]}),Object(n.jsx)(g,{}),Object(n.jsx)("h1",{children:"RECIPES"}),i?"Loading..":c.length>0&&c.map((function(e){return Object(n.jsx)(f,Object(O.a)({},e),e.id)}))]})}),N=(c(66),function(){var e=Object(l.g)(),t=Object(r.useState)(""),c=Object(m.a)(t,2),a=c[0],s=c[1],o=Object(r.useState)(""),i=Object(m.a)(o,2),u=i[0],d=i[1],h=function(){var t=Object(p.a)(j.a.mark((function t(c){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,b.a.post("https://recipe-strapi-app.herokuapp.com/auth/local",{identifier:a,password:u}).then((function(t){console.log(t.data),localStorage.setItem("jwtToken",t.data.jwt),localStorage.setItem("userToken",t.data.user.username),console.log("Vous \xeates bien connect\xe9 !"),e.push("/main")})).catch((function(e){console.log("An error occurred:",e.response),alert("Mauvaise combinaison")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"signup",children:[Object(n.jsx)("div",{className:"title",children:Object(n.jsx)("h2",{children:"LOGIN"})}),Object(n.jsxs)("div",{className:"inputs",children:[Object(n.jsxs)("form",{onSubmit:h,children:[Object(n.jsx)("p",{children:"Username"}),Object(n.jsx)("input",{type:"text",onChange:function(e){return s(e.target.value)},required:!0}),Object(n.jsx)("p",{children:"Password"}),Object(n.jsx)("input",{type:"password",onChange:function(e){return d(e.target.value)},required:!0})," ",Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{type:"submit",children:"Let's cook"})]}),Object(n.jsx)("div",{className:"link",children:Object(n.jsx)("a",{href:"/register",children:"Not registered yet ?"})})]})]})}),k=c(31),w=function(e){e.component;var t=Object(k.a)(e,["component"]),c=localStorage.getItem("jwtToken");return Object(n.jsx)(l.b,Object(O.a)(Object(O.a)({},t),{},{render:function(e){return null!=c?Object(n.jsx)(v,Object(O.a)({},e)):Object(n.jsx)(l.a,{to:"/"})}}))};var S=function(){return Object(n.jsx)(i.a,{children:Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(l.d,{children:[Object(n.jsx)(l.b,{path:"/",exact:!0,component:N}),Object(n.jsx)(l.b,{path:"/login",exact:!0,component:N}),Object(n.jsx)(l.b,{path:"/register",component:h}),Object(n.jsx)(w,{path:"/main",component:v,exact:!0})]})})})},T=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,68)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};o.a.render(Object(n.jsx)(i.a,{children:Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(S,{})})}),document.getElementById("root")),T()}},[[67,1,2]]]);
//# sourceMappingURL=main.b20784b6.chunk.js.map